<nav class="navbar" *ngIf="usuario">
  <div class="navbar-container">
    <div class="navbar-brand">
      <svg width="32" height="32" viewBox="0 0 32 32" fill="none" class="logo">
        <rect x="4" y="4" width="24" height="24" rx="3" stroke="currentColor" stroke-width="2"/>
        <path d="M10 16h12M16 10v12" stroke="currentColor" stroke-width="2"/>
      </svg>
      <span class="brand-text">SRS Manager</span>
    </div>

    <div class="navbar-menu">
      <div class="user-menu">
        <button class="user-button" (click)="toggleUserMenu()">
          <div class="user-avatar">
            {{ getInitials() }}
          </div>
          <div class="user-info">
            <span class="user-name">{{ usuario.nombre }} {{ usuario.apellido }}</span>
            <span class="user-email">{{ usuario.email }}</span>
          </div>
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M6 9l6 6 6-6"/>
          </svg>
        </button>

        <!-- Dropdown Menu -->
        <div class="dropdown-menu" *ngIf="showUserMenu" (click)="closeUserMenu()">
          <div class="dropdown-header">
            <div class="dropdown-user-info">
              <div class="dropdown-avatar">
                {{ getInitials() }}
              </div>
              <div>
                <div class="dropdown-name">{{ usuario.nombre }} {{ usuario.apellido }}</div>
                <div class="dropdown-email">{{ usuario.email }}</div>
              </div>
            </div>
          </div>

          <div class="dropdown-divider"></div>

          <a routerLink="/proyecto" class="dropdown-item" (click)="closeUserMenu()">
            <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
            </svg>
            <span>Inicio</span>
          </a>

          <a routerLink="/historial" class="dropdown-item" (click)="closeUserMenu()">
            <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            <span>Historial</span>
          </a>

          <div class="dropdown-divider"></div>

          <button class="dropdown-item dropdown-item-danger" (click)="logout()">
            <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
            </svg>
            <span>Cerrar Sesión</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</nav>

<!-- Overlay para cerrar el menú -->
<div class="dropdown-overlay" *ngIf="showUserMenu" (click)="closeUserMenu()"></div>